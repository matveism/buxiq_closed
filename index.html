
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="icon" type="image/png" href="https://i.imgur.com/OYl2m3u.png">
<!-- Apple Touch Icon for iOS Home Screen -->
<link rel="apple-touch-icon" href="https://i.imgur.com/OYl2m3u.png">

<!-- Recommended: Set a startup screen color (optional) -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="Your App Name">
<title>Bux iQ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#F77841',    /* 1st color */
            secondary: '#F4475A',  /* 2nd color */
            dark: '#0f172a',
            darker: '#020617',
            card: '#1e293b',
            accent: '#f59e0b',
          },
          backgroundImage: {
            'gradient-radial': 'radial-gradient(circle, rgba(255,255,255,0.1) 10%, rgba(0,0,0,0.1) 100%)',
            'pattern': 'url(https://www.transparenttextures.com/patterns/black-linen.png)', /* Example pattern */
          },
          boxShadow: {
            'card': '0 4px 8px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08)',
            'button': '0 4px 10px rgba(0, 0, 0, 0.2)',
          },
        }
      }
    }
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    /* Custom scrollbar styles */
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }
    ::-webkit-scrollbar-track {
      background: #1e293b;
    }
    ::-webkit-scrollbar-thumb {
      background: #F77841;
      border-radius: 3px;
    }
    .scrollbar-hide::-webkit-scrollbar {
      display: none;
    }
    .scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    .custom-scrollbar {
      scrollbar-width: thin;
      scrollbar-color: #F77841 #1e293b;
    }


  </style>
</head>

<body class="bg-dark text-white font-sans min-h-screen pb-16 md:pb-0">
<div class="max-w-7xl mx-auto p-4">
<!-- HEADER -->
<header class="flex flex-col md:flex-row items-center justify-between gap-4 mb-8">
  <div class="flex items-center justify-center h-5">
    <img src="https://i.imgur.com/ScoIm8B.png" alt="Logo" class="h-20 object-contain" />
  </div>

  <!-- User Profile with Level Indicator -->
  <div class="relative group hidden md:block">
    <div class="flex items-center space-x-3 bg-card rounded-xl px-4 py-2 cursor-pointer hover:bg-opacity-80 transition-all">
      <div class="relative">
        <img id="useravatar" src="https://ui-avatars.com/api/?background=c31432&color=fff&name=User" alt="User Avatar" class="w-12 h-12 rounded-full avatar" />
      </div>
      <div>
        <p id="account" class="font-semibold">N/A</p>
        <p class="text-xs text-gray-400"></p>
      </div>
    </div>
  </div>

  <!-- Balance Indicators -->
  <div class="flex flex-wrap gap-3 hidden md:flex">
    <div class="bg-gradient-to-r from-primary to-blue-600 px-4 py-2 rounded-xl flex items-center">
      <i class="fas fa-coins mr-2 text-yellow-300"></i>
      <div>
        <p class="text-xs text-gray-300">Balance</p>
        <p id="balance" class="font-bold">0.00</p>
      </div>
    </div>
    <div class="bg-gradient-to-r from-secondary to-green-600 px-4 py-2 rounded-xl flex items-center">
      <i class="fas fa-bolt mr-2 text-yellow-300"></i>
      <div>
        <p class="text-xs text-gray-300">Level</p>
        <p id="level" class="font-bold">0.00</p>
      </div>
    </div>
  </div>
</header>

<!-- Desktop NavBar -->
<nav class="hidden md:flex justify-between md:justify-start md:space-x-6 bg-card p-2 rounded-xl mb-6 text-center text-sm">
  <a href="#" data-section="earn" class="nav-link px-6 py-3 rounded-lg bg-primary font-medium flex items-center">
    <i class="fas fa-home mr-2"></i> Home
  </a>
  <a href="#" data-section="shop" class="nav-link px-6 py-3 rounded-lg hover:bg-gray-700 flex items-center transition">
    <i class="fas fa-shopping-bag mr-2"></i> Shop
  </a>
  <a href="#" data-section="leaders" class="nav-link px-6 py-3 rounded-lg hover:bg-gray-700 flex items-center transition">
    <i class="fas fa-trophy mr-2"></i> Leaders
  </a>
  <a href="#" data-section="profile" class="nav-link px-6 py-3 rounded-lg hover:bg-gray-700 flex items-center transition">
    <i class="fas fa-money-bill-wave mr-2"></i> Earn
  </a>
  <a href="#" data-section="help" class="nav-link px-6 py-3 rounded-lg hover:bg-gray-700 flex items-center transition">
    <i class="fas fa-question-circle mr-2"></i> Help
  </a>
  <a href="#" data-section="chat" class="nav-link px-6 py-3 rounded-lg hover:bg-gray-700 flex items-center transition">
    <i class="fas fa-comments mr-2"></i> Chat
  </a>
</nav>

<!-- Mobile User Info Bar -->
<div class="md:hidden flex items-center justify-between bg-card p-3 rounded-xl mb-4">
  <div class="flex items-center space-x-3">
    <div class="relative">
      <img id="mobileUseravatar" src="https://ui-avatars.com/api/?background=c31432&color=fff&name=User" alt="User Avatar" class="w-12 h-12 rounded-full avatar" />
    </div>
    <div>
      <p id="usernameDisplay" class="font-semibold">N/A</p>
      <p class="text-xs text-gray-400"></p>
    </div>
  </div>
  <div class="flex space-x-2">
    <div class="bg-gradient-to-r from-primary to-blue-600 px-3 py-1 rounded-lg flex items-center">
      <i class="fas fa-coins text-yellow-300 text-sm"></i>
      <span id="mobileBalance" class="ml-1 text-sm font-medium">0.00</span>
    </div>
    <div class="bg-gradient-to-r from-secondary to-green-600 px-3 py-1 rounded-lg flex items-center">
      <i class="fas fa-bolt text-yellow-300 text-sm"></i>
      <span id="mobileLevel" class="ml-1 text-sm font-medium">0.00</span>
    </div>
  </div>
</div>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Earning Portal</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: rgba(156, 163, 175, 0.5);
            border-radius: 20px;
        }
        .gradient-text {
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            background-image: linear-gradient(to right, #3b82f6, #8b5cf6);
        }
        .bg-card {
            background-color: rgba(31, 41, 55, 0.7);
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen">
<!-- Main Content -->
<main class="container mx-auto px-4 py-6 pb-20 md:pb-6">
    <!-- PAGE SECTIONS -->
    <!-- Activity Logs -->
    <div id="logs" class="card mb-4 h-48 overflow-hidden">
        <div class="p-4 h-full overflow-y-auto custom-scrollbar">
            <div class="text-center h-full flex items-center justify-center opacity-70 font-medium">
                <p>Your activity log will appear here</p>
            </div>
        </div>
    </div>

    <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Earn Rewards Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white">
    <!-- Main Container -->
    <section id="section-earn" class="container mx-auto px-4 py-8 max-w-4xl">
        <div class="bg-gray-800 rounded-xl p-6 shadow-md">
            <!-- Header Section -->
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold mb-2">Earn crypto, PayPal funds, and gift cards</h1>
                <p class="text-gray-300">Join our community earning rewards every day!</p>
            </div>

            <!-- Features Grid -->
            <div class="grid md:grid-cols-2 gap-6 mb-8">
                <!-- Left Column -->
                <div class="space-y-6">
                    <div class="bg-gray-700 p-4 rounded-lg">
                        <h2 class="text-xl font-semibold mb-3">Complete Surveys</h2>
                        <ul class="space-y-2">
                            <li class="flex items-center">
                                <span class="text-green-400 mr-2">✓</span>
                                <span>Download Apps</span>
                            </li>
                            <li class="text-gray-300 italic">And cash out to</li>
                        </ul>
                    </div>

                    <div class="bg-gray-700 p-4 rounded-lg">
                        <h2 class="text-xl font-semibold mb-3">Play Games</h2>
                        <ul class="space-y-2">
                            <li class="flex items-center">
                                <span class="text-green-400 mr-2">✓</span>
                                <span>Earn rewards</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Right Column -->
                <div class="space-y-6">
                    <div class="bg-gray-700 p-4 rounded-lg">
                        <h2 class="text-xl font-semibold mb-3">Reward Options</h2>
                        <ul class="space-y-2">
                            <li class="flex items-center">
                                <span class="text-green-400 mr-2">✓</span>
                                <span>Crypto Currencies</span>
                            </li>
                            <li class="flex items-center">
                                <span class="text-green-400 mr-2">✓</span>
                                <span>PayPal Money</span>
                            </li>
                            <li class="flex items-center">
                                <span class="text-green-400 mr-2">✓</span>
                                <span>Gift Cards</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Stats Section -->
            <div class="bg-gray-700 p-4 rounded-lg">
                <h2 class="text-xl font-semibold mb-4 text-center">Community Stats</h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                    <div>
                        <div class="text-2xl font-bold">758,502</div>
                        <div class="text-gray-300 text-sm">Completed Offers</div>
                    </div>
                    <div>
                        <div class="text-2xl font-bold">$362,630</div>
                        <div class="text-gray-300 text-sm">Total Earned</div>
                    </div>
                    <div>
                        <div class="text-2xl font-bold">58,236</div>
                        <div class="text-gray-300 text-sm">Registered Users</div>
                    </div>
                    <div>
                        <div class="text-2xl font-bold">567</div>
                        <div class="text-gray-300 text-sm">Online Now</div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</body>
</html>


    <!-- Shop Section -->
    <section id="section-shop" class="hidden">
        <h2 class="text-2xl font-bold mb-6">Shop Rewards</h2>
        <div class="bg-card rounded-xl p-6 text-center">
            <p class="text-gray-400 mb-2">Browse and redeem your points for gift cards and prizes.</p>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-4">
                <div class="bg-gradient-to-r from-yellow-500 to-yellow-700 rounded-lg p-4 flex flex-col items-center">
                    <i class="fas fa-gift text-3xl mb-2"></i>
                    <span class="font-bold">Amazon Gift Card</span>
                    <span class="text-sm text-gray-200 mt-1">From $5</span>
                    <button class="mt-3 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition">
                        Redeem
                    </button>
                </div>
                <div class="bg-gradient-to-r from-blue-500 to-blue-700 rounded-lg p-4 flex flex-col items-center">
                    <i class="fas fa-gamepad text-3xl mb-2"></i>
                    <span class="font-bold">Steam Wallet</span>
                    <span class="text-sm text-gray-200 mt-1">From $5</span>
                    <button class="mt-3 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition">
                        Redeem
                    </button>
                </div>
                <div class="bg-gradient-to-r from-green-500 to-green-700 rounded-lg p-4 flex flex-col items-center">
                    <i class="fas fa-credit-card text-3xl mb-2"></i>
                    <span class="font-bold">PayPal Cash</span>
                    <span class="text-sm text-gray-200 mt-1">From $5</span>
                    <button class="mt-3 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition">
                        Redeem
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Leaders Section -->
    <section id="section-leaders" class="hidden">
        <h2 class="text-2xl font-bold mb-6">Leaderboard</h2>
        <div class="bg-card rounded-xl p-6">
            <table class="w-full text-left">
                <thead>
                    <tr>
                        <th class="py-2 px-4">Rank</th>
                        <th class="py-2 px-4">User</th>
                        <th class="py-2 px-4">Points</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="py-2 px-4 font-bold">1</td>
                        <td class="py-2 px-4">Georgia Mills</td>
                        <td class="py-2 px-4">12,000</td>
                    </tr>
                    <tr>
                        <td class="py-2 px-4 font-bold">2</td>
                        <td class="py-2 px-4">Alex Carter</td>
                        <td class="py-2 px-4">10,500</td>
                    </tr>
                    <tr>
                        <td class="py-2 px-4 font-bold">3</td>
                        <td class="py-2 px-4">Jamie Lee</td>
                        <td class="py-2 px-4">9,800</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>

    <!-- Profile Section -->
    <section id="section-profile" class="hidden">
        <h2 class="text-2xl font-bold mb-6">Your Profile</h2>
        <div class="bg-card rounded-xl p-6 flex flex-col md:flex-row items-center gap-6">
            <div class="flex flex-col gap-4 w-full">
                <!-- User Dashboard Section (Login/Dashboard) -->
                <div id="userdash" class="section">
                    <!-- Login Container -->
                    <div id="login-container" class="card p-8 max-w-md mx-auto">
                        <div class="flex justify-center mb-6"></div>
                        <h2 class="text-2xl font-bold text-center font-space mb-6 gradient-text">LOGIN</h2>
                        <form id="loginForm" class="space-y-6 max-w-md mx-auto p-8 bg-gradient-to-br from-gray-900/70 to-gray-800/70 rounded-2xl shadow-lg backdrop-blur-md">
                            <div>
                                <label for="login-account" class="block text-sm font-semibold text-gray-300 mb-2">Account #</label>
                                <input id="login-account" type="text" required placeholder="Enter your account number"
                                    class="w-full px-4 py-3 rounded-lg bg-gray-700 bg-opacity-40 border border-transparent focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-100 placeholder-gray-400 transition" />
                            </div>
                            <div>
                                <label for="login-clientid" class="block text-sm font-semibold text-gray-300 mb-2">Client ID</label>
                                <input id="login-clientid" type="text" required placeholder="Enter your client ID"
                                    class="w-full px-4 py-3 rounded-lg bg-gray-700 bg-opacity-40 border border-transparent focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-100 placeholder-gray-400 transition" />
                            </div>
                            <div>
                                <div id="captcha" 
                                    class="select-none text-center text-yellow-400 font-mono text-xl tracking-widest mb-2 rounded-lg bg-gray-700 bg-opacity-50 py-2 shadow-inner">
                                    25441
                                </div>
                                <input id="captchaInput" type="text" required placeholder="Enter CAPTCHA"
                                    class="w-full px-4 py-3 rounded-lg bg-gray-700 bg-opacity-40 border border-transparent focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 text-gray-100 placeholder-yellow-300 transition" />
                            </div>
                            <button type="submit"
                                class="w-full py-3 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-purple-600 hover:to-indigo-500 text-white font-semibold flex items-center justify-center gap-2 shadow-lg transition-transform active:scale-95">
                                <span class="">login</span> Login
                            </button>
                        </form>
                        <div id="error-msg" class="text-center text-red-400 mt-4 hidden"></div>
                    </div>
                    
<!-- Dashboard (Visible After Login) -->
<div id="dashboard" class="hidden mx-auto px-3 sm:px-4 md:px-6">
    <div class="bg-gradient-to-br from-gray-900 to-gray-800 rounded-xl md:rounded-2xl shadow-lg md:shadow-2xl overflow-hidden backdrop-blur-sm bg-opacity-90 border border-gray-700/50">
        <div class="p-4 sm:p-6 md:p-8">
            <div class="text-center mb-6 sm:mb-10">
                <h2 class="text-2xl sm:text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 to-blue-500 tracking-tight">
                    EARNING PORTAL
                </h2>
                <p class="mt-2 text-sm sm:text-base text-gray-400 font-light">Complete offers and surveys to earn rewards</p>
            </div>
            
            <!-- Main Container -->
            <div class="container mx-auto px-2 sm:px-4 py-4 sm:py-6">
                <!-- Iframe Container (hidden by default) -->
                <div id="iframeContainer" class="fixed inset-0 z-50 bg-black/90 hidden flex items-center justify-center p-2 sm:p-4">
                    <div class="relative w-full h-full max-w-6xl">
                        <button id="closeIframe" class="absolute -top-8 sm:-top-10 right-0 bg-red-600 hover:bg-red-700 text-white rounded-full w-8 h-8 flex items-center justify-center z-50">
                            ✕
                        </button>
                        <iframe id="dashboardIframe" class="w-full h-full rounded-lg border border-gray-700 bg-gray-900" frameborder="0"></iframe>
                    </div>
                </div>

                <!-- Offerwall Grid - Now more responsive -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-5">
                    <!-- CPX Research -->
                    <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 border border-gray-700 hover:border-cyan-400/30 group relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-br from-cyan-500/10 to-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="relative z-10">
                            <div class="flex justify-center py-2 sm:py-3">
                                <img src="https://www.cpx-research.com/main/en/assets/img/logo.svg" alt="CPX Research Logo" class="h-8 sm:h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                            </div>
                            <button id="openOfferWallCPX" class="mt-3 sm:mt-4 w-full bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-400 hover:to-blue-500 text-white font-medium py-2 px-3 sm:py-2.5 sm:px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow hover:shadow-lg hover:shadow-cyan-500/20 text-sm sm:text-base">
                                Open OfferWall
                            </button>
                        </div>
                    </div>

                    <!-- SushiAds Survey -->
                    <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 border border-gray-700 hover:border-purple-400/30 group relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-br from-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="relative z-10">
                            <div class="flex justify-center py-2 sm:py-3 relative">
                                <img src="https://affi-plat.s3.us-east-2.amazonaws.com/platforms/sushiads-logo-horizontal.png" alt="sushiads Logo" class="h-8 sm:h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                            </div>
                            <button id="openOfferWallsads" class="mt-3 sm:mt-4 w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-400 hover:to-pink-500 text-white font-medium py-2 px-3 sm:py-2.5 sm:px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow hover:shadow-lg hover:shadow-purple-500/20 text-sm sm:text-base">
                                Open Survey Wall
                            </button>
                        </div>
                    </div>

                    <!-- SushiAds Offers -->
                    <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 border border-gray-700 hover:border-purple-400/30 group relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-br from-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="relative z-10">
                            <div class="flex justify-center py-2 sm:py-3 relative">
                                <img src="https://affi-plat.s3.us-east-2.amazonaws.com/platforms/sushiads-logo-horizontal.png" alt="sushiads1 Logo" class="h-8 sm:h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                                <span class="absolute top-0 right-0 bg-amber-500 text-gray-900 text-xs font-semibold px-1.5 py-0.5 sm:px-2 sm:py-1 rounded-full transform translate-x-1 -translate-y-1">
                                    Offers Only
                                </span>
                            </div>
                            <button id="openOfferWallsads1" class="mt-3 sm:mt-4 w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-400 hover:to-pink-500 text-white font-medium py-2 px-3 sm:py-2.5 sm:px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow hover:shadow-lg hover:shadow-purple-500/20 text-sm sm:text-base">
                                Open Offer Wall
                            </button>
                        </div>
                    </div>

                    <!-- KiwiWall -->
                    <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 border border-gray-700 hover:border-green-400/30 group relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-br from-green-500/10 to-emerald-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="relative z-10">
                            <div class="flex justify-center py-2 sm:py-3">
                                <img src="https://www.kiwiwall.com/img/logo.png" alt="kiwiwall Logo" class="h-8 sm:h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                            </div>
                            <button id="openOfferWallkiwi" class="mt-3 sm:mt-4 w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white font-medium py-2 px-3 sm:py-2.5 sm:px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow hover:shadow-lg hover:shadow-green-500/20 text-sm sm:text-base">
                                Open OfferWall
                            </button>
                        </div>
                    </div>

                    <!-- BUXiQ Cashout -->
                    <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 border border-gray-700 hover:border-blue-400/30 group relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-br from-blue-500/10 to-indigo-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="relative z-10">
                            <div class="flex justify-center py-2 sm:py-3">
                                <img src="https://i.imgur.com/3CUrxKO.png" alt="buxiq Logo" class="h-8 sm:h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                            </div>
                            <button id="openOfferWallbuxiq" class="mt-3 sm:mt-4 w-full bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-400 hover:to-indigo-500 text-white font-medium py-2 px-3 sm:py-2.5 sm:px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow hover:shadow-lg hover:shadow-blue-500/20 text-sm sm:text-base">
                                Cashout
                            </button>
                        </div>
                    </div>

                    <!-- BUXiQ Bonus -->
                    <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 border border-gray-700 hover:border-blue-400/30 group relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-br from-blue-500/10 to-indigo-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="relative z-10">
                            <div class="flex justify-center py-2 sm:py-3">
                                <img src="https://i.imgur.com/K5in0eX.png" alt="buxiq Logo" class="h-8 sm:h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                            </div>
                            <button id="openOfferWallbuxiqbonus" class="mt-3 sm:mt-4 w-full bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-400 hover:to-indigo-500 text-white font-medium py-2 px-3 sm:py-2.5 sm:px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow hover:shadow-lg hover:shadow-blue-500/20 text-sm sm:text-base">
                                Bonus
                            </button>
                        </div>
                    </div>

                    <!-- Wannads -->
                    <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 border border-gray-700 hover:border-orange-400/30 group relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-br from-orange-500/10 to-amber-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="relative z-10">
                            <div class="flex justify-center py-2 sm:py-3">
                                <img src="https://affi-plat.s3.us-east-2.amazonaws.com/platforms/wannads-ogotipo-naranja.png" alt="Wannads Logo" class="h-8 sm:h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                            </div>
                            <button id="openOfferWallwannads" class="mt-3 sm:mt-4 w-full bg-gradient-to-r from-orange-500 to-amber-600 hover:from-orange-400 hover:to-amber-500 text-white font-medium py-2 px-3 sm:py-2.5 sm:px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow hover:shadow-lg hover:shadow-orange-500/20 text-sm sm:text-base">
                                Open OfferWall
                            </button>
                        </div>
                    </div>

                    <!-- Chat -->
                    <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 border border-gray-700 hover:border-pink-400/30 group relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-br from-pink-500/10 to-rose-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="relative z-10">
                            <div class="flex justify-center py-2 sm:py-3">
                                <img src="https://i.imgur.com/JNXYNqp.png" alt="Chat Icon" class="h-8 sm:h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                            </div>
                            <button id="openOfferWallchat" class="mt-3 sm:mt-4 w-full bg-gradient-to-r from-pink-500 to-rose-600 hover:from-pink-400 hover:to-rose-500 text-white font-medium py-2 px-3 sm:py-2.5 sm:px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow hover:shadow-lg hover:shadow-pink-500/20 text-sm sm:text-base">
                                Open Chat
                            </button>
                        </div>
                    </div>

                    <!-- TaskWall -->
                    <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 border border-gray-700 hover:border-teal-400/30 group relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-br from-teal-500/10 to-cyan-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="relative z-10">
                            <div class="flex justify-center py-2 sm:py-3">
                                <img src="http://publishers.taskwall.io//manager/uploads/logo-2.png" alt="TaskWall Logo" class="h-8 sm:h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                            </div>
                            <button id="openOfferWalltaskwall" class="mt-3 sm:mt-4 w-full bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-400 hover:to-cyan-500 text-white font-medium py-2 px-3 sm:py-2.5 sm:px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow hover:shadow-lg hover:shadow-teal-500/20 text-sm sm:text-base">
                                Open OfferWall
                            </button>
                        </div>
                    </div>

                    <!-- Porix -->
                    <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 border border-gray-700 hover:border-violet-400/30 group relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-br from-violet-500/10 to-fuchsia-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="relative z-10">
                            <div class="flex justify-center py-2 sm:py-3">
                                <img src="https://i.imgur.com/m3TMe67.png" alt="Porix Logo" class="h-8 sm:h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                            </div>
                            <button id="openOfferWallporix" class="mt-3 sm:mt-4 w-full bg-gradient-to-r from-violet-500 to-fuchsia-600 hover:from-violet-400 hover:to-fuchsia-500 text-white font-medium py-2 px-3 sm:py-2.5 sm:px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow hover:shadow-lg hover:shadow-violet-500/20 text-sm sm:text-base">
                                Open OfferWall
                            </button>
                        </div>
                    </div>

                    <!-- Excentiv -->
                    <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 border border-gray-700 hover:border-sky-400/30 group relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-br from-sky-500/10 to-cyan-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="relative z-10">
                            <div class="flex justify-center py-2 sm:py-3">
                                <img src="https://excentiv.com/images/app-logo.svg" alt="Excentiv Logo" class="h-8 sm:h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                            </div>
                            <button id="openOfferWallExcentiv" class="mt-3 sm:mt-4 w-full bg-gradient-to-r from-sky-500 to-cyan-600 hover:from-sky-400 hover:to-cyan-500 text-white font-medium py-2 px-3 sm:py-2.5 sm:px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow hover:shadow-lg hover:shadow-sky-500/20 text-sm sm:text-base">
                                Open OfferWall
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-8 sm:mt-12 text-center">
                <button onclick="logout()" class="px-4 py-2 sm:px-6 sm:py-2.5 bg-gray-700 hover:bg-gray-600 text-gray-200 rounded-lg font-medium transition-all duration-200 border border-gray-600 hover:border-gray-500 shadow hover:shadow-lg text-sm sm:text-base">
                    Logout
                </button>
            </div>
        </div>
    </div>
</div>

    <!-- Help Section -->
    <section id="section-help" class="hidden">
        <h2 class="text-2xl font-bold mb-6">Help & Support</h2>
        <div class="bg-card rounded-xl p-6">
            <h3 class="font-semibold mb-2">Frequently Asked Questions</h3>
            <ul class="list-disc ml-6 text-gray-300">
                <li>How do I earn points?</li>
                <li>How can I redeem rewards?</li>
                <li>Who do I contact for support?</li>
            </ul>
            <button class="mt-6 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition">
                Contact Support
            </button>
        </div>
    </section>

    <!-- Chat Section -->
    <section id="section-chat" class="hidden">
        <h2 class="text-2xl font-bold mb-6">Community Chat</h2>
        <div class="bg-card rounded-xl p-6">
            <p class="mb-4 text-gray-400">Join the conversation with other members!</p>
            <div class="bg-gray-800 rounded-lg p-4 h-48 overflow-y-auto mb-4" id="chat-log">
                <!-- Chat messages here -->
            </div>
            <div class="flex">
                <input type="text" class="flex-grow rounded-l-lg bg-gray-700 px-4 py-2 focus:outline-none" placeholder="Type your message..." id="chat-input" />
                <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-r-lg font-medium transition" id="send-chat">Send</button>
            </div>
        </div>
    </section>
</main>

<!-- Bottom Navigation for Mobile -->
<div class="fixed bottom-0 left-0 right-0 bg-card border-t border-gray-700 shadow-lg md:hidden z-50">
    <div class="flex justify-around">
        <a href="#" data-section="earn" class="nav-link-mobile flex flex-col items-center justify-center p-3 text-blue-500">
            <i class="fas fa-home text-xl"></i>
            <span class="text-xs mt-1">Home</span>
        </a>
        <a href="#" data-section="shop" class="nav-link-mobile flex flex-col items-center justify-center p-3 text-gray-400">
            <i class="fas fa-shopping-bag text-xl"></i>
            <span class="text-xs mt-1">Shop</span>
        </a>
        <a href="#" data-section="leaders" class="nav-link-mobile flex flex-col items-center justify-center p-3 text-gray-400">
            <i class="fas fa-trophy text-xl"></i>
            <span class="text-xs mt-1">Leaders</span>
        </a>
        <a href="#" data-section="profile" class="nav-link-mobile flex flex-col items-center justify-center p-3 text-gray-400">
            <i class="fas fa-user text-xl"></i>
            <span class="text-xs mt-1">Profile</span>
        </a>
        <a href="#" data-section="help" class="nav-link-mobile flex flex-col items-center justify-center p-3 text-gray-400">
            <i class="fas fa-question-circle text-xl"></i>
            <span class="text-xs mt-1">Help</span>
        </a>
        <a href="#" data-section="chat" class="nav-link-mobile flex flex-col items-center justify-center p-3 text-gray-400">
            <i class="fas fa-comments text-xl"></i>
            <span class="text-xs mt-1">Chat</span>
        </a>
    </div>
</div>

<!-- Hidden iframe container for offerwalls -->
<div id="iframeContainer" class="fixed inset-0 bg-black bg-opacity-70 hidden z-50">
    <div class="relative w-full h-full p-4">
        <button onclick="closeIframe()" class="absolute top-4 right-4 bg-red-600 text-white px-4 py-2 rounded z-50">Close</button>
        <iframe id="dashboardIframe" class="w-full h-full rounded-lg" src="" frameborder="0"></iframe>
    </div>
</div>

<script>
// Global variables
let captchaCode = '';
const offerwallButtons = {
    'openOfferWallCPX': (user) => `https://offers.cpx-research.com/index.php?app_id=26219&ext_user_id=${user}&username=${user}&subid_1=&subid_2`,
    'openOfferWallsads': (user) => `https://offerwall.sushiads.com/surveywall?apiKey=67e76c74ca62f460071524&userId=${user}`,
    'openOfferWallchat': () => `https://bux-iq.netlify.app/chat.html`,
    'openOfferWallwannads': (user) => `https://earn.wannads.com/wall?apiKey=67d3d43d63631681386947&userId=${user}`,
    'openOfferWallsads1': (user) => `https://offerwall.sushiads.com/wall?apiKey=67e76c74ca62f460071524&userId=${user}`,
    'openOfferWallExcentiv': (user) => `https://excentiv.com/offerwall/?&userid=${user}&key=q1v8KGQfCjmNeXnhsHyo`,
    'openOfferWallbuxiq': () => `https://bux-iq.netlify.app/cashout.html`,
    'openOfferWallbuxiqbonus': () => `https://bux-iq.netlify.app/bonus.html`,
    'openOfferWallkiwi': (user) => `https://www.kiwiwall.com/wall/ICKEzWAlZv8O6QOXSxFdfJ7jLfU6RUtl/${user}`,
    'openOfferWalltaskwall': (user) => `https://wall.taskwall.io/?app_id=532d75c281c9725adc821ff7de18c199&userid=${user}`,
    'openOfferWallporix': (user) => `https://porix.org/app/iframe/10221/${user}`
};

// DOM Content Loaded - Initialize everything
document.addEventListener('DOMContentLoaded', function() {
    // Generate initial CAPTCHA
    generateCaptcha();
    
    // Show default section
    showSection('earn');
    
    // Load activity logs
    fetchCSV();
    
    // Set up chat functionality
    setupChat();
    
    // Initialize all event listeners
    initializeEventListeners();
    
    // Initialize offerwall buttons
    initializeOfferwallButtons();
});

// Initialize offerwall buttons
function initializeOfferwallButtons() {
    Object.keys(offerwallButtons).forEach(buttonId => {
        const button = document.getElementById(buttonId);
        if (button) {
            button.addEventListener('click', function() {
                const userAccount = document.getElementById('account').value.trim();
                const urlGenerator = offerwallButtons[buttonId];
                const url = urlGenerator(userAccount);
                openIframe(url);
            });
        } else {
            console.warn(`Button with ID '${buttonId}' not found.`);
        }
    });
}

// Initialize all event listeners
function initializeEventListeners() {
    // Navigation handlers
    document.querySelectorAll('.nav-link, .nav-link-mobile').forEach(link => {
        link.addEventListener('click', e => {
            e.preventDefault();
            showSection(link.dataset.section);
        });
    });
    
    // Login form handler
    const loginForm = document.getElementById('loginForm');
    if (loginForm) {
        loginForm.addEventListener('submit', handleLogin);
    }
    
    // Iframe close button
    const closeIframeBtn = document.getElementById('closeIframe');
    if (closeIframeBtn) {
        closeIframeBtn.addEventListener('click', closeIframe);
    }
    
    // Logout button
    const logoutBtn = document.getElementById('logoutBtn');
    if (logoutBtn) {
        logoutBtn.addEventListener('click', logout);
    }
    
    // Bonus code redemption
    const redeemBtn = document.getElementById('redeemBonus');
    if (redeemBtn) {
        redeemBtn.addEventListener('click', redeemBonusCode);
    }
}

// Iframe functions
function openIframe(url) {
    const iframeContainer = document.getElementById('iframeContainer');
    const dashboardIframe = document.getElementById('dashboardIframe');
    if (iframeContainer && dashboardIframe) {
        dashboardIframe.src = url;
        iframeContainer.classList.remove('hidden');
    } else {
        console.warn("Iframe elements not found.");
    }
}

function closeIframe() {
    const iframeContainer = document.getElementById('iframeContainer');
    const dashboardIframe = document.getElementById('dashboardIframe');
    if (iframeContainer && dashboardIframe) {
        iframeContainer.classList.add('hidden');
        dashboardIframe.src = '';
    }
}

// Setup chat functionality
function setupChat() {
    // Send button
    document.getElementById('send-chat')?.addEventListener('click', () => {
        sendChatMessage();
    });
    
    // Enter key in chat input
    document.getElementById('chat-input')?.addEventListener('keydown', e => {
        if (e.key === 'Enter') {
            e.preventDefault();
            sendChatMessage();
        }
    });
}

function sendChatMessage() {
    const input = document.getElementById('chat-input');
    const log = document.getElementById('chat-log');
    if (input && log && input.value.trim() !== '') {
        const msg = document.createElement('div');
        msg.className = 'mb-2';
        msg.innerHTML = `<span class="font-semibold text-primary">You:</span> ${input.value.trim()}`;
        log.appendChild(msg);
        input.value = '';
        log.scrollTop = log.scrollHeight;
    }
}

// Navigation handler
function showSection(section) {
    const sections = ['earn', 'shop', 'leaders', 'profile', 'help', 'chat'];
    sections.forEach(sec => {
        document.getElementById('section-' + sec).classList.toggle('hidden', sec !== section);
    });
    
    // Highlight desktop nav links
    document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.toggle('bg-primary', link.dataset.section === section);
        link.classList.toggle('text-white', link.dataset.section === section);
        if (link.dataset.section === section) {
            link.classList.remove('hover:bg-gray-700', 'text-gray-400');
        } else {
            link.classList.add('hover:bg-gray-700', 'text-gray-400');
        }
    });
    
    // Highlight mobile nav links
    document.querySelectorAll('.nav-link-mobile').forEach(link => {
        link.classList.toggle('text-primary', link.dataset.section === section);
        link.classList.toggle('text-gray-400', link.dataset.section !== section);
    });
}

// Generate CAPTCHA
function generateCaptcha() {
    captchaCode = Math.floor(10000 + Math.random() * 90000).toString();
    const captchaEl = document.getElementById('captcha');
    if (captchaEl) {
        captchaEl.textContent = 'Enter: ' + captchaCode;
    }
    return captchaCode;
}

// Login handler
async function handleLogin(e) {
    e.preventDefault();
    const account = document.getElementById('login-account').value.trim();
    const clientid = document.getElementById('login-clientid').value.trim();
    const captchaInput = document.getElementById('captchaInput').value.trim();
    const errorMsg = document.getElementById('error-msg');

    // Validate CAPTCHA
    if (captchaInput !== captchaCode) {
        if (errorMsg) {
            errorMsg.textContent = 'Invalid CAPTCHA';
            errorMsg.classList.remove('hidden');
        } else {
            alert('Invalid CAPTCHA');
        }
        generateCaptcha();
        document.getElementById('captchaInput').value = '';
        return;
    }

    try {
        const response = await fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vQHuo-I6k4RbAnXvz_FvCzshqg7Cm5dqAXwNkvDLpgpZH84OGUSbX6TiOUfMrCHv3CiNnLnx0IhzNZC/pub?gid=0&single=true&output=csv');
        if (!response.ok) throw new Error('Network response was not ok');
        
        const data = await response.text();
        const rows = data.trim().split('\n').map(row => row.split(','));
        
        // Find user in spreadsheet data
        const user = rows.find(r => r[0] === account && r[1] === clientid);
        
        if (user) {
            const status = (user[2] || '').toLowerCase();
            if (status === 'blocked') {
                if (errorMsg) {
                    errorMsg.textContent = 'Your account is blocked.';
                    errorMsg.classList.remove('hidden');
                } else {
                    alert('Your account is blocked.');
                }
                document.getElementById('login-account').value = '';
                document.getElementById('login-clientid').value = '';
                document.getElementById('captchaInput').value = '';
                generateCaptcha();
                return;
            }

            // Update UI with user data
            updateUserUI(user);
            
            // Store in local storage if needed
            localStorage.setItem('buxiq_account', account);
            
            // Show dashboard
            document.getElementById('login-container').classList.add('hidden');
            document.getElementById('dashboard').classList.remove('hidden');
            if (errorMsg) errorMsg.classList.add('hidden');
        } else {
            if (errorMsg) {
                errorMsg.textContent = 'Invalid credentials';
                errorMsg.classList.remove('hidden');
            } else {
                alert('Invalid credentials');
            }
            document.getElementById('captchaInput').value = '';
            generateCaptcha();
        }
    } catch (err) {
        console.error('Fetch error:', err);
        if (errorMsg) {
            errorMsg.textContent = 'Error loading data.';
            errorMsg.classList.remove('hidden');
        }
        document.getElementById('captchaInput').value = '';
        generateCaptcha();
    }
}

// Update user UI after login
function updateUserUI(user) {
    const avatarUrl = user[5] || `https://ui-avatars.com/api/?background=c31432&color=fff&name=${encodeURIComponent(user[4] || 'User')}`;
    
    // Update avatars
    document.getElementById('useravatar').src = avatarUrl;
    document.getElementById('mobileUseravatar').src = avatarUrl;
    
    // Update level
    document.getElementById('level').textContent = user[6] || '1';
    
    // Update balance
    document.getElementById('balance').innerHTML = `<span class="currency">$</span> ${user[3] || '0.00'}`;
    document.getElementById('mobileBalance').innerHTML = `<span class="material-symbols-rounded text-green-400 mr-1">savings</span> $${user[3] || '0.00'}`;
    
    // Update username
    document.getElementById('account').textContent = user[4] || 'User';
}

// Logout function
function logout() {
    document.getElementById('dashboard').classList.add('hidden');
    document.getElementById('login-container').classList.remove('hidden');
    document.getElementById('login-account').value = '';
    document.getElementById('login-clientid').value = '';
    document.getElementById('captchaInput').value = '';
    document.getElementById('error-msg').classList.add('hidden');
    generateCaptcha();
}

// Update balance function
async function updateBalance() {
    const account = document.getElementById('account').value.trim();
    const clientid = document.getElementById('clientid').value.trim();
    if (!account || !clientid) return;

    try {
        const response = await fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vQHuo-I6k4RbAnXvz_FvCzshqg7Cm5dqAXwNkvDLpgpZH84OGUSbX6TiOUfMrCHv3CiNnLnx0IhzNZC/pub?gid=0&single=true&output=csv');
        if (!response.ok) throw new Error('Network error');
        
        const data = await response.text();
        const rows = data.trim().split('\n').map(r => r.split(','));
        const user = rows.find(r => r[0] === account && r[1] === clientid);
        
        if (user) {
            document.getElementById('balance').innerHTML = `<span class="currency">$</span> ${user[3] || '0.00'}`;
            document.getElementById('mobileBalance').innerHTML = `<span class="material-symbols-rounded text-green-400 mr-1">savings</span> $${user[3] || '0.00'}`;
        } else {
            document.getElementById('balance').innerHTML = `<span class="currency">$</span> 0.00`;
            document.getElementById('mobileBalance').innerHTML = `<span class="material-symbols-rounded text-green-400 mr-1">savings</span> $0.00`;
        }
    } catch (err) {
        console.error('Error updating balance:', err);
    }
}

// Fetch CSV for activity logs
async function fetchCSV() {
    try {
        const response = await fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vQ3p3daAnCETfJtrUUvaiNqoUreYkn9FIHus6rEyq-e8E8oLaV51L_NrVWjHp1CyTv3UqBqryq3aH-0/pub?gid=0&single=true&output=csv');
        if (!response.ok) throw new Error('Network error');
        
        const data = await response.text();
        const rows = data.trim().split('\n').slice(1); // skip header
        const logsContainer = document.getElementById('logs')?.querySelector('div');
        
        if (!logsContainer) return;
        logsContainer.innerHTML = '';

        let hasLogs = false;
        rows.forEach((row, index) => {
            const cols = row.split(',').map(c => c.trim());
            if (cols.length >= 7 && cols[2] && cols[6]) {
                hasLogs = true;
                const username = cols[2];
                const amount = cols[6];
                const logDiv = document.createElement('div');
                logDiv.className = 'flex items-center justify-between p-3 mb-2 bg-white/10 rounded-lg text-sm';
                logDiv.style.animationDelay = `${index * 50}ms`;
                logDiv.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 flex items-center justify-center bg-red-600 rounded-full text-white">
                            <span class="text-sm font-bold">${username.charAt(0).toUpperCase()}</span>
                        </div>
                        <div>
                            <div class="text-sm font-medium text-white">${username}</div>
                        </div>
                    </div>
                    <div class="text-green-400 font-semibold">+${amount}</div>
                `;
                logsContainer.prepend(logDiv);
            }
        });
        
        if (!hasLogs) {
            logsContainer.innerHTML = '<div class="text-center h-full flex items-center justify-center opacity-70 font-medium"><p>Your activity log will appear here</p></div>';
        }
    } catch (err) {
        console.error('Error fetching activity logs:', err);
        const logsContainer = document.getElementById('logs')?.querySelector('div');
        if (logsContainer) {
            logsContainer.innerHTML = '<div class="text-center h-full flex items-center justify-center text-red-400 font-medium"><p>Error loading activity logs.</p></div>';
        }
    }
}

// Bonus code redemption
async function redeemBonusCode() {
    const username = document.getElementById('username').value.trim();
    const bonusCode = document.getElementById('bonusCode').value.trim();
    const amountLocalInput = document.getElementById('amountLocal');
    const amountUsdInput = document.getElementById('amountUsd');

    if (!username || !bonusCode) {
        alert('Please fill in all fields');
        return;
    }

    if (amountLocalInput) amountLocalInput.value = '';
    if (amountUsdInput) amountUsdInput.value = '';

    try {
        const response = await fetch(`https://script.google.com/macros/s/AKfycbxmqOnPJLPuHD6u_DD66bwY0R4MYQ8v9uF1Mv0pm8Sg9APSS4R4oXzbs3zin2FoTMK5/exec?username=${encodeURIComponent(username)}&bonusCode=${encodeURIComponent(bonusCode)}`);
        const result = await response.text();
        
        if (result.includes('Error')) {
            alert(result);
        } else {
            const [amountLocal, amountUsd] = result.split(',');
            if (amountLocalInput) amountLocalInput.value = amountLocal.trim();
            if (amountUsdInput) amountUsdInput.value = amountUsd.trim();
            sendPostback(amountLocal, amountUsd, username, bonusCode);
            alert('Bonus code redeemed successfully!');
        }
    } catch (err) {
        console.error('Error redeeming bonus code:', err);
        alert('Error redeeming bonus code. Please try again.');
    }
}

// Postback function
function sendPostback(amountLocal, amountUsd, username, bonusCode) {
    const timestamp = Date.now();
    const url = `https://script.google.com/macros/s/AKfycbyvw4LiShTvgnTTLRLISnTYJRhqeStmZgL9YD_ZuQEJubcDPH8bSbGpHPCVHDfx0dbW/exec?status=success&trans_id=${timestamp}&user_id=${encodeURIComponent(username)}&bonusCode=${encodeURIComponent(bonusCode)}&sub_id=&sub_id_2=&amount_local=${encodeURIComponent(amountLocal)}&amount_usd=${encodeURIComponent(amountUsd)}&offer_id=bonus_redeem&hash=secure_hash_value&ip_click=192.168.1.1`;
    
    fetch(url)
        .then(res => res.json())
        .then(data => console.log('Postback Success:', data))
        .catch(err => console.error('Postback Error:', err));
}
  // Initialize offerwall buttons
        function initializeOfferwallButtons() {
            Object.keys(offerwallButtons).forEach(buttonId => {
                const button = document.getElementById(buttonId);
                if (button) {
                    button.addEventListener('click', function() {
                        // For demo purposes, using a test user ID
                        // In production, you would get this from your login system
                        const testUserId = "test_user_123";
                        const urlGenerator = offerwallButtons[buttonId];
                        const url = urlGenerator(testUserId);
                        openIframe(url);
                    });
                } else {
                    console.warn(`Button with ID '${buttonId}' not found.`);
                }
            });
        }

        // Iframe functions
        function openIframe(url) {
            const iframeContainer = document.getElementById('iframeContainer');
            const dashboardIframe = document.getElementById('dashboardIframe');
            if (iframeContainer && dashboardIframe) {
                dashboardIframe.src = url;
                iframeContainer.classList.remove('hidden');
            } else {
                console.warn("Iframe elements not found.");
            }
        }

        function closeIframe() {
            const iframeContainer = document.getElementById('iframeContainer');
            const dashboardIframe = document.getElementById('dashboardIframe');
            if (iframeContainer && dashboardIframe) {
                iframeContainer.classList.add('hidden');
                dashboardIframe.src = '';
            }
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initializeOfferwallButtons();
            
            // Close iframe button
            const closeIframeBtn = document.getElementById('closeIframe');
            if (closeIframeBtn) {
                closeIframeBtn.addEventListener('click', closeIframe);
            }
        });
</script>






