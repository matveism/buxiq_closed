<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="https://i.imgur.com/2cMurbI.png"/>
    <title>Bux iQ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#3b82f6',
              secondary: '#10b981',
              dark: '#0f172a',
              darker: '#020617',
              card: '#1e293b',
              accent: '#f59e0b',
            }
          }
        }
      }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 6px;
        height: 6px;
      }
      ::-webkit-scrollbar-track {
        background: #1e293b;
      }
      ::-webkit-scrollbar-thumb {
        background: #3b82f6;
        border-radius: 3px;
      }
      .scrollbar-hide::-webkit-scrollbar {
        display: none;
      }
      .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .custom-scrollbar {
        scrollbar-width: thin;
        scrollbar-color: #3b82f6 #1e293b;
      }
    </style>
  </head>
<body class="bg-dark text-white font-sans min-h-screen pb-16 md:pb-0">
    <div class="max-w-7xl mx-auto p-4">
      <!-- Header -->
      <header class="flex flex-col md:flex-row items-center justify-between gap-4 mb-8">
        <div class="flex items-center justify-center h-5">
          <img src="https://i.imgur.com/UdEuixj.png" alt="Logo" class="h-20 object-contain" />
        </div>

        <!-- User Profile with Level Indicator -->
        <div class="relative group hidden md:block">
          <div class="flex items-center space-x-3 bg-card rounded-xl px-4 py-2 cursor-pointer hover:bg-opacity-80 transition-all">
            <div class="relative">
              <img id="useravatar" src="https://ui-avatars.com/api/?background=c31432&color=fff&name=User" alt="User Avatar" class="w-12 h-12 rounded-full avatar">
            </div>
            <div>
              <p id="account" class="font-semibold">N/A</p>
              <p class="text-xs text-gray-400"></p>
            </div>
          </div>
        </div>

        <!-- Balance Indicators -->
        <div class="flex flex-wrap gap-3 hidden md:flex">
          <div class="bg-gradient-to-r from-primary to-blue-600 px-4 py-2 rounded-xl flex items-center">
            <i class="fas fa-coins mr-2 text-yellow-300"></i>
            <div>
              <p class="text-xs text-gray-300">Balance</p>
              <p id="balance" class="font-bold">0.00</p>
            </div>
          </div>
          <div class="bg-gradient-to-r from-secondary to-green-600 px-4 py-2 rounded-xl flex items-center">
            <i class="fas fa-bolt mr-2 text-yellow-300"></i>
            <div>
              <p class="text-xs text-gray-300">Level</p>
              <p id="level" class="font-bold">0.00</p>
            </div>
          </div>
        </div>
      </header>

      <!-- Desktop NavBar -->
      <nav class="hidden md:flex justify-between md:justify-start md:space-x-6 bg-card p-2 rounded-xl mb-6 text-center text-sm">
        <a href="#" data-section="earn" class="nav-link px-6 py-3 rounded-lg bg-primary font-medium flex items-center">
          <i class="fas fa-home mr-2"></i> Home
        </a>
        <a href="#" data-section="shop" class="nav-link px-6 py-3 rounded-lg hover:bg-gray-700 flex items-center transition">
          <i class="fas fa-shopping-bag mr-2"></i> Shop
        </a>
        <a href="#" data-section="leaders" class="nav-link px-6 py-3 rounded-lg hover:bg-gray-700 flex items-center transition">
          <i class="fas fa-trophy mr-2"></i> Leaders
        </a>
        <a href="#" data-section="profile" class="nav-link px-6 py-3 rounded-lg hover:bg-gray-700 flex items-center transition">
          <i class="fas fa-money-bill-wave mr-2"></i> Earn
        </a>
        <a href="#" data-section="help" class="nav-link px-6 py-3 rounded-lg hover:bg-gray-700 flex items-center transition">
          <i class="fas fa-question-circle mr-2"></i> Help
        </a>
        <a href="#" data-section="chat" class="nav-link px-6 py-3 rounded-lg hover:bg-gray-700 flex items-center transition">
          <i class="fas fa-comments mr-2"></i> Chat
        </a>
      </nav>

      <!-- Mobile User Info Bar -->
      <div class="md:hidden flex items-center justify-between bg-card p-3 rounded-xl mb-4">
        <div class="flex items-center space-x-3">
          <div class="relative">
            <img id="mobileUseravatar" src="https://ui-avatars.com/api/?background=c31432&color=fff&name=User" alt="User Avatar" class="w-12 h-12 rounded-full avatar">
          </div>
          <div>
            <p id="usernameDisplay" class="font-semibold">N/A</p>
            <p class="text-xs text-gray-400"></p>
          </div>
        </div>
        <div class="flex space-x-2">
          <div class="bg-gradient-to-r from-primary to-blue-600 px-3 py-1 rounded-lg flex items-center">
            <i class="fas fa-coins text-yellow-300 text-sm"></i>
            <span id="mobileBalance" class="ml-1 text-sm font-medium">0.00</span>
          </div>
          <div class="bg-gradient-to-r from-secondary to-green-600 px-3 py-1 rounded-lg flex items-center">
            <i class="fas fa-bolt text-yellow-300 text-sm"></i>
            <span id="mobileLevel" class="ml-1 text-sm font-medium">0.00</span>
          </div>
        </div>
      </div>

      <!-- PAGE SECTIONS -->

      <!-- Earn Section -->
      <section id="section-earn">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-3">
          <h2 class="text-2xl font-bold">Earn Money</h2>
          <div class="flex items-center space-x-2 w-full md:w-auto">
            <div class="relative flex-grow md:flex-grow-0">
              <input type="text" placeholder="Search offers..." class="bg-card border border-gray-700 rounded-full py-2 px-4 pl-10 text-sm focus:outline-none focus:ring-2 focus:ring-primary w-full">
              <i class="fas fa-search absolute left-3 top-2.5 text-gray-400"></i>
            </div>
            <button class="bg-primary hover:bg-blue-600 text-white px-4 py-2 rounded-full text-sm font-medium transition hidden md:block">
              <i class="fas fa-filter mr-1"></i> Filters
            </button>
          </div>
        </div>
        <div class="bg-card rounded-xl p-4 mb-6">
          <div class="flex flex-col md:flex-row items-center">
            <div class="bg-gradient-to-r from-primary to-blue-600 p-3 rounded-lg mb-3 md:mb-0 md:mr-4">
              <i class="fas fa-users text-white text-xl"></i>
            </div>
            <div class="text-center md:text-left flex-grow">
              <h3 class="font-bold">Join our Discord Community</h3>
              <p class="text-sm text-gray-400">Get access to exclusive giveaways and level-specific promocodes</p>
            </div>
            <button class="mt-3 md:mt-0 bg-gradient-to-r from-purple-500 to-pink-500 hover:opacity-90 text-white px-4 py-2 rounded-lg text-sm font-medium transition">
              Join Now
            </button>
          </div>
        </div>
        <!-- Offers Grid -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
          <!-- Offer Card 1 -->
          <div class="bg-card rounded-xl overflow-hidden hover:shadow-lg hover:-translate-y-1 transition-all duration-300 border border-gray-700">
            <div class="bg-gradient-to-r from-yellow-400 to-yellow-600 p-4 flex justify-center">
              <img src="https://via.placeholder.com/150x60?text=NTIK+ME" alt="NTIK ME" class="h-12 object-contain" />
            </div>
            <div class="p-4">
              <h3 class="font-bold mb-2">NTIK ME Surveys</h3>
              <p class="text-sm text-gray-400 mb-3">Complete surveys and earn up to $5.00 per survey</p>
              <div class="flex justify-between items-center">
                <span class="text-xs bg-gray-700 px-2 py-1 rounded flex items-center">
                  <i class="fas fa-star text-yellow-400 mr-1"></i> 4.8
                </span>
                <span class="text-xs bg-gray-700 px-2 py-1 rounded">Avg: $1.50</span>
                <button class="bg-primary hover:bg-blue-600 text-white px-3 py-1 rounded text-sm font-medium transition">
                  Start
                </button>
              </div>
            </div>
          </div>
          <!-- Offer Card 2 -->
          <div class="bg-card rounded-xl overflow-hidden hover:shadow-lg hover:-translate-y-1 transition-all duration-300 border border-gray-700">
            <div class="bg-gradient-to-r from-blue-400 to-blue-600 p-4 flex justify-center">
              <img src="https://via.placeholder.com/150x60?text=AdscendMedia" alt="AdscendMedia" class="h-12 object-contain" />
            </div>
            <div class="p-4">
              <h3 class="font-bold mb-2">AdscendMedia Offers</h3>
              <p class="text-sm text-gray-400 mb-3">Try apps & services for instant rewards</p>
              <div class="flex justify-between items-center">
                <span class="text-xs bg-gray-700 px-2 py-1 rounded flex items-center">
                  <i class="fas fa-star text-yellow-400 mr-1"></i> 4.5
                </span>
                <span class="text-xs bg-gray-700 px-2 py-1 rounded">Avg: $2.00</span>
                <button class="bg-primary hover:bg-blue-600 text-white px-3 py-1 rounded text-sm font-medium transition">
                  Start
                </button>
              </div>
            </div>
          </div>
          <!-- Offer Card 3 -->
          <div class="bg-card rounded-xl overflow-hidden hover:shadow-lg hover:-translate-y-1 transition-all duration-300 border border-gray-700">
            <div class="bg-gradient-to-r from-green-400 to-green-600 p-4 flex justify-center">
              <img src="https://via.placeholder.com/150x60?text=AdGateMedia" alt="AdGateMedia" class="h-12 object-contain" />
            </div>
            <div class="p-4">
              <h3 class="font-bold mb-2">AdGateMedia</h3>
              <p class="text-sm text-gray-400 mb-3">Watch videos and complete simple tasks</p>
              <div class="flex justify-between items-center">
                <span class="text-xs bg-gray-700 px-2 py-1 rounded flex items-center">
                  <i class="fas fa-star text-yellow-400 mr-1"></i> 4.2
                </span>
                <span class="text-xs bg-gray-700 px-2 py-1 rounded">Avg: $0.50</span>
                <button class="bg-primary hover:bg-blue-600 text-white px-3 py-1 rounded text-sm font-medium transition">
                  Start
                </button>
              </div>
            </div>
          </div>
          <!-- Offer Card 4 -->
          <div class="bg-card rounded-xl overflow-hidden hover:shadow-lg hover:-translate-y-1 transition-all duration-300 border border-gray-700">
            <div class="bg-gradient-to-r from-purple-400 to-purple-600 p-4 flex justify-center">
              <div class="text-white font-bold text-xl">MM WALL</div>
            </div>
            <div class="p-4">
              <h3 class="font-bold mb-2">MM Wall Tasks</h3>
              <p class="text-sm text-gray-400 mb-3">Complete micro tasks for quick cash</p>
              <div class="flex justify-between items-center">
                <span class="text-xs bg-gray-700 px-2 py-1 rounded flex items-center">
                  <i class="fas fa-star text-yellow-400 mr-1"></i> 4.0
                </span>
                <span class="text-xs bg-gray-700 px-2 py-1 rounded">Avg: $0.25</span>
                <button class="bg-primary hover:bg-blue-600 text-white px-3 py-1 rounded text-sm font-medium transition">
                  Start
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Shop Section -->
      <section id="section-shop" class="hidden">
        <h2 class="text-2xl font-bold mb-6">Shop Rewards</h2>
        <div class="bg-card rounded-xl p-6 text-center">
          <p class="text-gray-400 mb-2">Browse and redeem your points for gift cards and prizes.</p>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-4">
            <div class="bg-gradient-to-r from-yellow-500 to-yellow-700 rounded-lg p-4 flex flex-col items-center">
              <i class="fas fa-gift text-3xl mb-2"></i>
              <span class="font-bold">Amazon Gift Card</span>
              <span class="text-sm text-gray-200 mt-1">From $5</span>
              <button class="mt-3 bg-primary hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition">
                Redeem
              </button>
            </div>
            <div class="bg-gradient-to-r from-blue-500 to-blue-700 rounded-lg p-4 flex flex-col items-center">
              <i class="fas fa-gamepad text-3xl mb-2"></i>
              <span class="font-bold">Steam Wallet</span>
              <span class="text-sm text-gray-200 mt-1">From $5</span>
              <button class="mt-3 bg-primary hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition">
                Redeem
              </button>
            </div>
            <div class="bg-gradient-to-r from-green-500 to-green-700 rounded-lg p-4 flex flex-col items-center">
              <i class="fas fa-credit-card text-3xl mb-2"></i>
              <span class="font-bold">PayPal Cash</span>
              <span class="text-sm text-gray-200 mt-1">From $5</span>
              <button class="mt-3 bg-primary hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition">
                Redeem
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Leaders Section -->
      <section id="section-leaders" class="hidden">
        <h2 class="text-2xl font-bold mb-6">Leaderboard</h2>
        <div class="bg-card rounded-xl p-6">
          <table class="w-full text-left">
            <thead>
              <tr>
                <th class="py-2 px-4">Rank</th>
                <th class="py-2 px-4">User</th>
                <th class="py-2 px-4">Points</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="py-2 px-4 font-bold">1</td>
                <td class="py-2 px-4">Georgia Mills</td>
                <td class="py-2 px-4">12,000</td>
              </tr>
              <tr>
                <td class="py-2 px-4 font-bold">2</td>
                <td class="py-2 px-4">Alex Carter</td>
                <td class="py-2 px-4">10,500</td>
              </tr>
              <tr>
                <td class="py-2 px-4 font-bold">3</td>
                <td class="py-2 px-4">Jamie Lee</td>
                <td class="py-2 px-4">9,800</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Profile Section -->
      <section id="section-profile" class="hidden">
        <h2 class="text-2xl font-bold mb-6">Your Profile</h2>
        <div class="bg-card rounded-xl p-6 flex flex-col md:flex-row items-center gap-6">
          <div class="flex flex-col gap-4 w-full">
            <!-- User Dashboard Section (Login/Dashboard) -->
            <div id="userdash" class="section">
              <!-- Login Container -->
              <div id="login-container" class="card p-8 max-w-md mx-auto">
                <div class="flex justify-center mb-6"></div>
                <h2 class="text-2xl font-bold text-center font-space mb-6 gradient-text">LOGIN</h2>
                <form id="loginForm" class="space-y-6 max-w-md mx-auto p-8 bg-gradient-to-br from-gray-900/70 to-gray-800/70 rounded-2xl shadow-lg backdrop-blur-md">
                  <div>
                    <label for="account" class="block text-sm font-semibold text-gray-300 mb-2">Account #</label>
                    <input id="account" type="text" required placeholder="Enter your account number"
                      class="w-full px-4 py-3 rounded-lg bg-gray-700 bg-opacity-40 border border-transparent focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-100 placeholder-gray-400 transition" />
                  </div>

                  <div>
                    <label for="clientid" class="block text-sm font-semibold text-gray-300 mb-2">Client ID</label>
                    <input id="clientid" type="text" required placeholder="Enter your client ID"
                      class="w-full px-4 py-3 rounded-lg bg-gray-700 bg-opacity-40 border border-transparent focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-100 placeholder-gray-400 transition" />
                  </div>

                  <div>
                    <div id="captcha" 
                      class="select-none text-center text-yellow-400 font-mono text-xl tracking-widest mb-2 rounded-lg bg-gray-700 bg-opacity-50 py-2 shadow-inner">
                      25441
                    </div>
                    <input id="captchaInput" type="text" required placeholder="Enter CAPTCHA"
                      class="w-full px-4 py-3 rounded-lg bg-gray-700 bg-opacity-40 border border-transparent focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 text-gray-100 placeholder-yellow-300 transition" />
                  </div>

                  <button type="submit"
                    class="w-full py-3 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-purple-600 hover:to-indigo-500 text-white font-semibold flex items-center justify-center gap-2 shadow-lg transition-transform active:scale-95">
                    <span class="">login</span>
                    Login
                  </button>
                </form>

                <div id="error-msg" class="text-center text-red-400 mt-4 hidden"></div>
              </div>
              
              <!-- Dashboard (Visible After Login) -->
              <div id="dashboard" class="hidden max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl shadow-2xl overflow-hidden backdrop-blur-sm bg-opacity-90 border border-gray-700/50">
                  <div class="p-8">
                    <div class="text-center mb-10">
                      <h2 class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 to-blue-500 tracking-tight">
                        EARNING PORTAL
                      </h2>
                      <p class="mt-2 text-gray-400 font-light">Complete offers and surveys to earn rewards</p>
                    </div>
                    
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5">
                      <!-- CPX Research -->
                      <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-xl p-5 border border-gray-700 hover:border-cyan-400/30 group relative overflow-hidden">
                          <div class="absolute inset-0 bg-gradient-to-br from-cyan-500/10 to-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                          <div class="relative z-10">
                              <div class="flex justify-center py-3">
                                  <img src="https://www.cpx-research.com/main/en/assets/img/logo.svg" alt="CPX Research Logo" class="h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                              </div>
                              <button id="openOfferWallCPX" class="mt-4 w-full bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-400 hover:to-blue-500 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow-lg hover:shadow-cyan-500/20">
                                  Open OfferWall
                              </button>
                          </div>
                      </div>

                      <!-- SushiAds Survey -->
                      <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-xl p-5 border border-gray-700 hover:border-purple-400/30 group relative overflow-hidden">
                          <div class="absolute inset-0 bg-gradient-to-br from-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                          <div class="relative z-10">
                              <div class="flex justify-center py-3 relative">
                                  <img src="https://affi-plat.s3.us-east-2.amazonaws.com/platforms/sushiads-logo-horizontal.png" alt="sushiads Logo" class="h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                              </div>
                              <button id="openOfferWallsads" class="mt-4 w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-400 hover:to-pink-500 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow-lg hover:shadow-purple-500/20">
                                  Open Survey Wall
                              </button>
                          </div>
                      </div>

                      <!-- SushiAds Offers -->
                      <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-xl p-5 border border-gray-700 hover:border-purple-400/30 group relative overflow-hidden">
                          <div class="absolute inset-0 bg-gradient-to-br from-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                          <div class="relative z-10">
                              <div class="flex justify-center py-3 relative">
                                  <img src="https://affi-plat.s3.us-east-2.amazonaws.com/platforms/sushiads-logo-horizontal.png" alt="sushiads1 Logo" class="h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                                  <span class="absolute top-0 right-0 bg-amber-500 text-gray-900 text-xs font-semibold px-2 py-1 rounded-full transform translate-x-1 -translate-y-1">
                                      Offers Only
                                  </span>
                              </div>
                              <button id="openOfferWallsads1" class="mt-4 w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-400 hover:to-pink-500 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow-lg hover:shadow-purple-500/20">
                                  Open Offer Wall
                              </button>
                          </div>
                      </div>

                      <!-- KiwiWall -->
                      <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-xl p-5 border border-gray-700 hover:border-green-400/30 group relative overflow-hidden">
                          <div class="absolute inset-0 bg-gradient-to-br from-green-500/10 to-emerald-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                          <div class="relative z-10">
                              <div class="flex justify-center py-3">
                                  <img src="https://www.kiwiwall.com/img/logo.png" alt="kiwiwall Logo" class="h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                              </div>
                              <button id="openOfferWallkiwi" class="mt-4 w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow-lg hover:shadow-green-500/20">
                                  Open OfferWall
                              </button>
                          </div>
                      </div>

                      <!-- BUXiQ Cashout -->
                      <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-xl p-5 border border-gray-700 hover:border-blue-400/30 group relative overflow-hidden">
                          <div class="absolute inset-0 bg-gradient-to-br from-blue-500/10 to-indigo-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                          <div class="relative z-10">
                              <div class="flex justify-center py-3">
                                  <img src="https://i.imgur.com/3CUrxKO.png" alt="buxiq Logo" class="h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                              </div>
                              <button id="openOfferWallbuxiq" class="mt-4 w-full bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-400 hover:to-indigo-500 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow-lg hover:shadow-blue-500/20">
                                  Cashout
                              </button>
                          </div>
                      </div>

                      <!-- BUXiQ Bonus -->
                      <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-xl p-5 border border-gray-700 hover:border-blue-400/30 group relative overflow-hidden">
                          <div class="absolute inset-0 bg-gradient-to-br from-blue-500/10 to-indigo-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                          <div class="relative z-10">
                              <div class="flex justify-center py-3">
                                  <img src="https://i.imgur.com/K5in0eX.png" alt="buxiq Logo" class="h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                              </div>
                              <button id="openOfferWallbuxiqbonus" class="mt-4 w-full bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-400 hover:to-indigo-500 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow-lg hover:shadow-blue-500/20">
                                  Bonus
                              </button>
                          </div>
                      </div>

                      <!-- Wannads -->
                      <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-xl p-5 border border-gray-700 hover:border-orange-400/30 group relative overflow-hidden">
                          <div class="absolute inset-0 bg-gradient-to-br from-orange-500/10 to-amber-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                          <div class="relative z-10">
                              <div class="flex justify-center py-3">
                                  <img src="https://affi-plat.s3.us-east-2.amazonaws.com/platforms/wannads-ogotipo-naranja.png" alt="Wannads Logo" class="h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                              </div>
                              <button id="openOfferWallwannads" class="mt-4 w-full bg-gradient-to-r from-orange-500 to-amber-600 hover:from-orange-400 hover:to-amber-500 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow-lg hover:shadow-orange-500/20">
                                  Open OfferWall
                              </button>
                          </div>
                      </div>

                      <!-- Chat -->
                      <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-xl p-5 border border-gray-700 hover:border-pink-400/30 group relative overflow-hidden">
                          <div class="absolute inset-0 bg-gradient-to-br from-pink-500/10 to-rose-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                          <div class="relative z-10">
                              <div class="flex justify-center py-3">
                                  <img src="https://i.imgur.com/JNXYNqp.png" alt="Chat Icon" class="h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                              </div>
                              <button id="openOfferWallchat" class="mt-4 w-full bg-gradient-to-r from-pink-500 to-rose-600 hover:from-pink-400 hover:to-rose-500 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow-lg hover:shadow-pink-500/20">
                                  Open Chat
                              </button>
                          </div>
                      </div>

                      <!-- TaskWall -->
                      <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-xl p-5 border border-gray-700 hover:border-teal-400/30 group relative overflow-hidden">
                          <div class="absolute inset-0 bg-gradient-to-br from-teal-500/10 to-cyan-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                          <div class="relative z-10">
                              <div class="flex justify-center py-3">
                                  <img src="http://publishers.taskwall.io//manager/uploads/logo-2.png" alt="TaskWall Logo" class="h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                              </div>
                              <button id="openOfferWalltaskwall" class="mt-4 w-full bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-400 hover:to-cyan-500 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow-lg hover:shadow-teal-500/20">
                                  Open OfferWall
                              </button>
                          </div>
                      </div>

                      <!-- Porix -->
                      <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-xl p-5 border border-gray-700 hover:border-violet-400/30 group relative overflow-hidden">
                          <div class="absolute inset-0 bg-gradient-to-br from-violet-500/10 to-fuchsia-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                          <div class="relative z-10">
                              <div class="flex justify-center py-3">
                                  <img src="https://i.imgur.com/m3TMe67.png" alt="Porix Logo" class="h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                              </div>
                              <button id="openOfferWallporix" class="mt-4 w-full bg-gradient-to-r from-violet-500 to-fuchsia-600 hover:from-violet-400 hover:to-fuchsia-500 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow-lg hover:shadow-violet-500/20">
                                  Open OfferWall
                              </button>
                          </div>
                      </div>

                      <!-- Excentiv -->
                      <div class="bg-gray-800/50 hover:bg-gray-700/50 transition-all duration-300 rounded-xl p-5 border border-gray-700 hover:border-sky-400/30 group relative overflow-hidden">
                          <div class="absolute inset-0 bg-gradient-to-br from-sky-500/10 to-cyan-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                          <div class="relative z-10">
                              <div class="flex justify-center py-3">
                                  <img src="https://excentiv.com/images/app-logo.svg" alt="Excentiv Logo" class="h-10 object-contain filter brightness-0 invert opacity-90 group-hover:opacity-100 transition-opacity">
                              </div>
                              <button id="openOfferWallExcentiv" class="mt-4 w-full bg-gradient-to-r from-sky-500 to-cyan-600 hover:from-sky-400 hover:to-cyan-500 text-white font                              </button>
                          </div>
                      </div>
                    </div>
                    
                    <div class="mt-12 text-center">
                      <button onclick="logout()" class="px-6 py-2.5 bg-gray-700 hover:bg-gray-600 text-gray-200 rounded-lg font-medium transition-all duration-200 border border-gray-600 hover:border-gray-500 shadow hover:shadow-lg">
                        Logout
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Help Section -->
      <section id="section-help" class="hidden">
        <h2 class="text-2xl font-bold mb-6">Help & Support</h2>
        <div class="bg-card rounded-xl p-6">
          <h3 class="font-semibold mb-2">Frequently Asked Questions</h3>
          <ul class="list-disc ml-6 text-gray-300">
            <li>How do I earn points?</li>
            <li>How can I redeem rewards?</li>
            <li>Who do I contact for support?</li>
          </ul>
          <button class="mt-6 bg-primary hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition">
            Contact Support
          </button>
        </div>
      </section>

      <!-- Chat Section -->
      <section id="section-chat" class="hidden">
        <h2 class="text-2xl font-bold mb-6">Community Chat</h2>
        <div class="bg-card rounded-xl p-6">
          <p class="mb-4 text-gray-400">Join the conversation with other members!</p>
          <div class="bg-gray-800 rounded-lg p-4 h-48 overflow-y-auto mb-4">
            <p><span class="font-bold text-primary">Georgia:</span> Hi everyone!</p>
            <p><span class="font-bold text-secondary">Alex:</span> Welcome Georgia!</p>
            <p><span class="font-bold text-accent">Jamie:</span> Good luck on the offers!</p>
          </div>
          <div class="flex">
            <input type="text" class="flex-grow rounded-l-lg bg-gray-700 px-4 py-2 focus:outline-none" placeholder="Type your message...">
            <button class="bg-primary hover:bg-blue-600 text-white px-4 py-2 rounded-r-lg font-medium transition">Send</button>
          </div>
        </div>
      </section>

      <!-- Mobile Bottom Navigation -->
      <div class="fixed bottom-0 left-0 right-0 bg-card border-t border-gray-700 shadow-lg md:hidden z-50">
        <div class="flex justify-around">
          <a href="#" data-section="earn" class="nav-link-mobile flex flex-col items-center justify-center p-3 text-primary">
            <i class="fas fa-home text-xl"></i>
            <span class="text-xs mt-1">Home</span>
          </a>
          <a href="#" data-section="shop" class="nav-link-mobile flex flex-col items-center justify-center p-3 text-gray-400 hover:text-white">
            <i class="fas fa-shopping-bag text-xl"></i>
            <span class="text-xs mt-1">Shop</span>
          </a>
          <a href="#" data-section="leaders" class="nav-link-mobile flex flex-col items-center justify-center p-3 text-gray-400 hover:text-white">
            <i class="fas fa-trophy text-xl"></i>
            <span class="text-xs mt-1">Leaders</span>
          </a>
          <a href="#" data-section="profile" class="nav-link-mobile flex flex-col items-center justify-center p-3 text-gray-400 hover:text-white">
            <i class="fas fa-money-bill-wave text-xl"></i>
            <span class="text-xs mt-1">Earn</span>
          </a>
          <a href="#" data-section="help" class="nav-link-mobile flex flex-col items-center justify-center p-3 text-gray-400 hover:text-white">
            <i class="fas fa-question-circle text-xl"></i>
            <span class="text-xs mt-1">Help</span>
          </a>
          <a href="#" data-section="chat" class="nav-link-mobile flex flex-col items-center justify-center p-3 text-gray-400 hover:text-white">
            <i class="fas fa-comments text-xl"></i>
            <span class="text-xs mt-1">Chat</span>
          </a>
        </div>
      </div>

<script>
// Navigation logic
function showSection(section) {
  const sections = ['earn', 'shop', 'leaders', 'profile', 'help', 'chat'];
  sections.forEach(sec => {
    document.getElementById('section-' + sec).classList.add('hidden');
  });
  document.getElementById('section-' + section).classList.remove('hidden');
  
  // Highlight nav links
  document.querySelectorAll('.nav-link').forEach(link => {
    link.classList.remove('bg-primary', 'text-white');
    link.classList.add('hover:bg-gray-700', 'text-gray-400');
    if (link.dataset.section === section) {
      link.classList.add('bg-primary', 'text-white');
      link.classList.remove('hover:bg-gray-700', 'text-gray-400');
    }
  });
  
  document.querySelectorAll('.nav-link-mobile').forEach(link => {
    link.classList.remove('text-primary', 'text-white');
    link.classList.add('text-gray-400');
    if (link.dataset.section === section) {
      link.classList.add('text-primary');
      link.classList.remove('text-gray-400');
    }
  });
}
// --- Functions from the "Very Old Code" ---

        // User Dashboard Login
        function generateCaptcha() {
            const captcha = Math.floor(10000 + Math.random() * 90000);
            const captchaElement = document.getElementById('captcha');
            if (captchaElement) {
                captchaElement.textContent = `Enter: ${captcha}`;
            }
            return captcha;
        }


        function logout() {
            const dashboard = document.getElementById('dashboard');
            const loginContainer = document.getElementById('login-container');
            const accountInput = document.getElementById('account');
            const clientidInput = document.getElementById('clientid');
            const captchaInput = document.getElementById('captchaInput');
            const errorMsg = document.getElementById('error-msg');

            if (dashboard && loginContainer && accountInput && clientidInput && captchaInput && errorMsg) {
                dashboard.classList.add('hidden');
                loginContainer.classList.remove('hidden');
                accountInput.value = '';
                clientidInput.value = '';
                captchaInput.value = '';
                errorMsg.classList.add('hidden'); // Hide error message on logout
                captchaCode = generateCaptcha(); // Generate new captcha on logout
            } else {
                 console.warn("Logout elements not found.");
            }
        }
// Initialize navigation
document.querySelectorAll('.nav-link, .nav-link-mobile').forEach(link => {
  link.addEventListener('click', function(e) {
    e.preventDefault();
    showSection(this.dataset.section);
  });
});
// Attach login form submit listener
        const loginForm = document.getElementById('loginForm');
        if (loginForm) {
             loginForm.addEventListener('submit', async function(e) {
                e.preventDefault();

                const account = document.getElementById('account').value.trim();
                const clientid = document.getElementById('clientid').value.trim();
                const captchaInput = document.getElementById('captchaInput').value.trim();
                const errorMsg = document.getElementById('error-msg');


                if (captchaInput != captchaCode) {
                    if (errorMsg) {
                         errorMsg.textContent = 'Invalid CAPTCHA';
                         errorMsg.classList.remove('hidden');
                    } else {
                         alert('Invalid CAPTCHA');
                    }
                    captchaCode = generateCaptcha();
                    document.getElementById('captchaInput').value = '';
                    return;
                }

                try {
                    // Ensure the URL is correct and accessible
                    const response = await fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vQHuo-I6k4RbAnXvz_FvCzshqg7Cm5dqAXwNkvDLpgpZH84OGUSbX6TiOUfMrCHv3CiNnLnx0IhzNZC/pub?gid=0&single=true&output=csv');
                    if (!response.ok) throw new Error('Failed to fetch data: ' + response.statusText);

                    const data = await response.text();
                    const rows = data.split('\n').map(row => row.split(','));
                    // Assuming structure: Account#, Client ID, Status, Balance, Username, Avatar URL, Level
                    const user = rows.find(row => row[0] === account && row[1] === clientid);

                    const useravatarElement = document.getElementById('useravatar');
                    const mobileUseravatarElement = document.getElementById('mobileUseravatar');
                    const levelElement = document.getElementById('level');
                    const mobileLevelElement = document.getElementById('mobileLevel');
                    const balanceElement = document.getElementById('balance');
                    const usernameDisplayElement = document.getElementById('usernameDisplay');
                    const dashboard = document.getElementById('dashboard');
                    const loginContainer = document.getElementById('login-container');


                    if (user) {
                        const userStatus = user[2] ? user[2].trim().toLowerCase() : '';
                        const userBalance = user[3] || '0.00';
                        const userUsername = user[4] || 'User';
                        const userAvatarUrl = user[5] || `https://ui-avatars.com/api/?background=c31432&color=fff&name=${encodeURIComponent(userUsername)}`;
                        const userLevel = user[6] || '1';


                        if (userStatus === 'blocked') {
                             if (errorMsg) {
                                errorMsg.textContent = 'Your account is blocked.';
                                errorMsg.classList.remove('hidden');
                             } else {
                                alert('Your account is blocked.');
                             }
                            document.getElementById('account').value = '';
                            document.getElementById('clientid').value = '';
                            document.getElementById('captchaInput').value = '';
                            captchaCode = generateCaptcha(); // Generate new captcha
                        } else {
                            // Update UI elements
                            if (useravatarElement) useravatarElement.src = userAvatarUrl;
                            if (mobileUseravatarElement) mobileUseravatarElement.src = userAvatarUrl;
                            if (levelElement) levelElement.textContent = userLevel;
                            if (mobileLevelElement) mobileLevelElement.textContent = userLevel;
                            if (balanceElement) balanceElement.innerHTML = `<span class="currency">$</span> ${userBalance}`;
                            if (usernameDisplayElement) usernameDisplayElement.textContent = userUsername;
                             // Update mobile balance display
                            const mobileBalanceElement = document.getElementById('mobileBalance');
                            if (mobileBalanceElement) mobileBalanceElement.innerHTML = `<span class="material-symbols-rounded text-green-400 mr-1">savings</span> $${userBalance}`;


                            // Store account number (optional, for persistent login)
                            localStorage.setItem('buxiq_account', account);

                            // Switch views
                            if (loginContainer) loginContainer.classList.add('hidden');
                            if (dashboard) dashboard.classList.remove('hidden');
                             if (errorMsg) errorMsg.classList.add('hidden'); // Hide error on success

                            console.log("Login successful:", userUsername);
                        }
                    } else {
                        if (errorMsg) {
                            errorMsg.textContent = 'Invalid credentials';
                            errorMsg.classList.remove('hidden');
                        } else {
                            alert('Invalid credentials');
                        }
                         document.getElementById('captchaInput').value = ''; // Clear captcha on failed login
                         captchaCode = generateCaptcha(); // Generate new captcha
                    }
                } catch (error) {
                    console.error("Login error:", error);
                     if (errorMsg) {
                        errorMsg.textContent = 'Error: Could not load data. Please try again later.';
                        errorMsg.classList.remove('hidden');
                     } else {
                        alert('Error: Could not load data. Please try again later.');
                     }
                     document.getElementById('captchaInput').value = ''; // Clear captcha on error
                     captchaCode = generateCaptcha(); // Generate new captcha
                }
            });
        }


        // Offerwall Iframes
        function openIframe(url) {
            const iframeContainer = document.getElementById('iframeContainer');
            const dashboardIframe = document.getElementById('dashboardIframe');
            if (iframeContainer && dashboardIframe) {
                dashboardIframe.src = url;
                iframeContainer.classList.remove('hidden');
            } else {
                 console.warn("Iframe elements not found.");
            }
        }

        function closeIframe() {
            const iframeContainer = document.getElementById('iframeContainer');
            const dashboardIframe = document.getElementById('dashboardIframe');
             if (iframeContainer && dashboardIframe) {
                iframeContainer.classList.add('hidden');
                dashboardIframe.src = ''; // Clear the iframe source
             }
        }

        // Attach listeners to Offerwall buttons
        const offerwallButtons = {
            'openOfferWallCPX': (user) => `https://offers.cpx-research.com/index.php?app_id=26219&ext_user_id=${user}&username=${user}&subid_1=&subid_2`,
            'openOfferWallsads': (user) => `https://offerwall.sushiads.com/surveywall?apiKey=67e76c74ca62f460071524&userId=${user}`,
            'openOfferWallchat': () => `https://bux-iq.netlify.app/chat.html`, // Does not use user ID
            'openOfferWallwannads': (user) => `https://earn.wannads.com/wall?apiKey=67d3d43d63631681386947&userId=${user}`,
            'openOfferWallsads1': (user) => `https://offerwall.sushiads.com/wall?apiKey=67e76c74ca62f460071524&userId=${user}`,
            'openOfferWallExcentiv': (user) => `https://excentiv.com/offerwall/?&userid=${user}&key=q1v8KGQfCjmNeXnhsHyo`,
            'openOfferWallbuxiq': () => `https://bux-iq.netlify.app/cashout.html`, // Does not use user ID
            'openOfferWallbuxiqbonus': () => `https://bux-iq.netlify.app/bonus.html`, // Does not use user ID
            'openOfferWallkiwi': (user) => `https://www.kiwiwall.com/wall/ICKEzWAlZv8O6QOXSxFdfJ7jLfU6RUtl/${user}`,
            'openOfferWalltaskwall': (user) => `https://wall.taskwall.io/?app_id=532d75c281c9725adc821ff7de18c199&userid=${user}`,
            'openOfferWallporix': (user) => `https://porix.org/app/iframe/10221/${user}`
        };

        Object.keys(offerwallButtons).forEach(buttonId => {
            const button = document.getElementById(buttonId);
            if (button) {
                button.addEventListener('click', function() {
                    const userAccount = document.getElementById('account').value.trim(); // Get account number from login form
                    const urlGenerator = offerwallButtons[buttonId];
                    const url = urlGenerator(userAccount); // Pass user account if needed
                    openIframe(url);
                });
            } else {
                 console.warn(`Button with ID '${buttonId}' not found.`);
            }
        });


        // Update Balance
        async function updateBalance() {
            const account = document.getElementById('account').value.trim(); // Get account from input
            const clientid = document.getElementById('clientid').value.trim(); // Get clientid from input

            if (!account || !clientid) {
                console.warn("Account or Client ID not entered. Cannot update balance.");
                // Optionally show a message to the user
                return;
            }

            try {
                const response = await fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vQHuo-I6k4RbAnXvz_FvCzshqg7Cm5dqAXwNkvDLpgpZH84OGUSbX6TiOUfMrCHv3CiNnLnx0IhzNZC/pub?gid=0&single=true&output=csv');
                if (!response.ok) throw new Error('Failed to fetch data: ' + response.statusText);

                const data = await response.text();
                const rows = data.split('\n').map(row => row.split(','));
                 // Assuming structure: Account#, Client ID, Status, Balance, Username, Avatar URL, Level
                const user = rows.find(row => row[0] === account && row[1] === clientid);

                const balanceElement = document.getElementById('balance');
                const mobileBalanceElement = document.getElementById('mobileBalance');

                if (user) {
                     const userBalance = user[3] || '0.00';
                     if (balanceElement) balanceElement.innerHTML = `<span class="currency">$</span> ${userBalance}`;
                     if (mobileBalanceElement) mobileBalanceElement.innerHTML = `<span class="material-symbols-rounded text-green-400 mr-1">savings</span> $${userBalance}`;
                    console.log('Balance updated for user:', account);
                } else {
                    console.warn('User not found for balance update.');
                    // Optionally reset balance display if user not found
                     if (balanceElement) balanceElement.innerHTML = `<span class="currency">$</span> 0.00`;
                     if (mobileBalanceElement) mobileBalanceElement.innerHTML = `<span class="material-symbols-rounded text-green-400 mr-1">savings</span> $0.00`;
                }
            } catch (error) {
                console.error('Error updating balance:', error);
                // Optionally show an error message to the user
            }
        }

        // Recent Activity Logs
        async function fetchCSV() {
            try {
                // Ensure the URL is correct and accessible
                const response = await fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vQ3p3daAnCETfJtrUUvaiNqoUreYkn9FIHus6rEyq-e8E8oLaV51L_NrVWjHp1CyTv3UqBqryq3aH-0/pub?gid=0&single=true&output=csv');
                if (!response.ok) throw new Error('Failed to fetch logs: ' + response.statusText);

                const data = await response.text();
                const rows = data.split('\n').slice(1); // Skip header row
                const logsContainer = document.getElementById('logs') ? document.getElementById('logs').querySelector('div') : null;

                if (logsContainer) {
                    logsContainer.innerHTML = ''; // Clear existing logs

                    rows.forEach((row, index) => {
                         // Assuming structure: Timestamp, Offerwall, Username, Offer Name, Points, Status, Amount ($)
                        const columns = row.split(',').map(item => item.trim());
                        if (columns.length >= 7 && columns[2] && columns[6]) { // Check if Username and Amount columns exist
                            const username = columns[2];
                            const amount = columns[6];

                            const logEntry = document.createElement('div');
                            logEntry.className = 'flex items-center justify-between p-3 mb-2 bg-white/10 rounded-lg text-sm'; /* Adjusted styling */
                            logEntry.style.animationDelay = `${index * 50}ms`;
                            logEntry.innerHTML = `
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 flex items-center justify-center bg-red-600 rounded-full text-white"> <!-- Adjusted background color -->
                                        <span class="text-sm font-bold">${username.charAt(0).toUpperCase()}</span>
                                    </div>
                                    <div>
                                        <div class="text-sm font-medium text-white">${username}</div> <!-- Adjusted text color -->
                                    </div>
                                </div>
                                <div class="text-green-400 font-semibold">+${amount}</div> <!-- Adjusted text color -->
                            `;

                            logsContainer.prepend(logEntry); // Add to the beginning to show newest first
                        }
                    });

                    // If no logs, display the placeholder
                    if (logsContainer.childElementCount === 0) {
                        logsContainer.innerHTML = '<div class="text-center h-full flex items-center justify-center opacity-70 font-medium"><p>Your activity log will appear here</p></div>';
                    }

                } else {
                     console.warn("Activity logs container not found.");
                }
            } catch (error) {
                console.error('Error fetching activity logs:', error);
                const logsContainer = document.getElementById('logs') ? document.getElementById('logs').querySelector('div') : null;
                 if (logsContainer) {
                     logsContainer.innerHTML = '<div class="text-center h-full flex items-center justify-center text-red-400 font-medium"><p>Error loading activity logs.</p></div>';
                 }
            }
        }

        // Bonus Code Redemption
        async function redeemBonusCode() {
            const username = document.getElementById('username').value.trim();
            const bonusCode = document.getElementById('bonusCode').value.trim();
            const amountLocalInput = document.getElementById('amountLocal');
            const amountUsdInput = document.getElementById('amountUsd');

            if (!username || !bonusCode) {
                alert('Please fill in all fields');
                return;
            }

            // Clear previous results
            if (amountLocalInput) amountLocalInput.value = '';
            if (amountUsdInput) amountUsdInput.value = '';


            try {
                // Send a request to the Google Apps Script web app to fetch data from the Google Sheets
                 // Ensure the URL is correct and accessible
                const response = await fetch(`https://script.google.com/macros/s/AKfycbxmqOnPJLPuHD6u_DD66bwY0R4MYQ8v9uF1Mv0pm8Sg9APSS4R4oXzbs3zin2FoTMK5/exec?username=${encodeURIComponent(username)}&bonusCode=${encodeURIComponent(bonusCode)}`);
                const result = await response.text();

                console.log('Bonus redemption result:', result); // For debugging

                if (result.includes("Error")) {
                    alert(result);
                } else {
                    const [amountLocal, amountUsd] = result.split(','); // Expecting data in format "amountLocal,amountUsd"
                    if (amountLocalInput) amountLocalInput.value = amountLocal.trim();
                    if (amountUsdInput) amountUsdInput.value = amountUsd.trim();
                    sendPostback(amountLocal, amountUsd, username, bonusCode); // Call the postback function
                    alert('Bonus code redeemed successfully!');
                }
            } catch (error) {
                console.error('Error redeeming bonus code:', error);
                alert('Error redeeming bonus code. Please try again.');
            }
        }

        // Postback Function (from old code)
        function sendPostback(amountLocal, amountUsd, username, bonusCode) {
            const timestamp = new Date().getTime();
            // Ensure the URL is correct and accessible
            const postbackUrl = `https://script.google.com/macros/s/AKfycbyvw4LiShTvgnTTLRLISnTYJRhqeStmZgL9YD_ZuQEJubcDPH8bSbGpHPCVHDfx0dbW/exec?status=success&trans_id=${timestamp}&user_id=${encodeURIComponent(username)}&bonusCode=${encodeURIComponent(bonusCode)}&sub_id=&sub_id_2=&amount_local=${encodeURIComponent(amountLocal)}&amount_usd=${encodeURIComponent(amountUsd)}&offer_id=bonus_redeem&hash=secure_hash_value&ip_click=192.168.1.1`; // Added offer_id and updated hash/ip placeholders

            fetch(postbackUrl)
                .then(response => response.json()) // Assuming the script returns JSON
                .then(data => console.log('Postback Success:', data))
                .catch(error => console.error('Postback Error:', error));
        }


        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Initial setup
            fetchCSV(); // Load initial activity logs
            generateCaptcha(); // Generate initial captcha

            // Check if user is already logged in (e.g., from localStorage)
            // This part was not in the old code but is good practice.
            // For this merge, we'll rely on the login form for simplicity,
            // but you could add a check here to skip the login if a valid
            // account is found in localStorage and fetch user data.

            // Set default active section
            const initialSection = window.location.hash ? window.location.hash.substring(1) : 'home';
            if (document.getElementById(initialSection)) {
                showSection(initialSection);
            } else {
                showSection('profile'); // Default to home if hash is invalid
            }

             // Add event listener for the update balance button after it exists
             const updateBalanceBtn = document.getElementById('updateBalanceBtn');
             if(updateBalanceBtn) {
                 updateBalanceBtn.addEventListener('click', updateBalance);
             } else {
                 console.warn("Update balance button not found.");
             }

             // Ensure mobile balance is updated on load
             updateBalance(); // Call once on load to populate balance
        });

        // Update mobile balance display when main balance changes (optional, could be done within updateBalance)
        // This is less critical if updateBalance handles both
        // const balanceSpan = document.getElementById('balance').querySelector('span:last-child');
        // const mobileBalanceSpan = document.getElementById('mobileBalance').querySelector('span:last-child');
        // if (balanceSpan && mobileBalanceSpan) {
        //     const observer = new MutationObserver(() => {
        //         mobileBalanceSpan.textContent = balanceSpan.textContent;
        //     });
        //     observer.observe(balanceSpan, { characterData: true, subtree: true });
        // }


    </script>
  </body>
</html>
